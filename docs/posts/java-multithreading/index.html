<!doctype html><html lang=vi><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Java: Láº­p TrÃ¬nh Äa Luá»“ng CÆ¡ Báº£n | Profile</title><link rel=stylesheet href=../../css/style.css><link rel=icon href=../../favicon.ico type=image/x-icon></head><body><header class=header><div class=container><div class=logo><a href=../../><span class=logo-icon>ğŸ </span>
<span class=logo-text>Profile</span></a></div><nav class=nav><div class=search-container><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
<input type=text id=headerSearchInput class=header-search-input placeholder="TÃ¬m kiáº¿m bÃ i viáº¿t..."><div id=searchDropdown class=search-dropdown></div></div><ul class=menu><li><a href=../../#about>Vá» tÃ´i</a></li><li><a href=../../#experience>Kinh nghiá»‡m</a></li><li><a href=../../#education>Há»c váº¥n</a></li><li><a href=../../#certificates>Chá»©ng chá»‰</a></li><li><a href=../../#contact>LiÃªn há»‡</a></li><li><a href=../../posts>Blog</a></li><li><a href=../../#gallery>ThÆ° viá»‡n áº£nh</a></li></ul><button class=theme-toggle aria-label="Toggle dark mode" onclick=toggleTheme()>
<span class=theme-icon></span></button></nav></div></header><script>function toggleTheme(){const e=document.documentElement,n=e.getAttribute("data-theme"),t=n==="dark"?"light":"dark";e.setAttribute("data-theme",t),localStorage.setItem("theme",t),updateThemeIcon()}function updateThemeIcon(){const e=document.documentElement.getAttribute("data-theme"),t=document.querySelector(".theme-icon");t.textContent=e==="dark"?"ğŸŒ™":"â˜€ï¸"}(function(){const e=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",e),updateThemeIcon()})();let searchIndex=[];fetch("https://bao2482003.github.io/22DTHC5-6_BaoDG_MBT/index.json").then(e=>e.json()).then(e=>{searchIndex=e,console.log("Search index loaded:",searchIndex.length,"items")}).catch(e=>console.error("Search index error:",e));const headerSearchInput=document.getElementById("headerSearchInput"),searchDropdown=document.getElementById("searchDropdown");headerSearchInput?.addEventListener("input",function(e){const t=e.target.value.toLowerCase().trim();if(t.length<2){searchDropdown.style.display="none";return}const n=searchIndex.filter(e=>e.title.toLowerCase().includes(t)||e.content.toLowerCase().includes(t)||e.tags&&e.tags.some(e=>e.toLowerCase().includes(t)));if(n.length===0){searchDropdown.innerHTML='<div class="dropdown-no-results">KhÃ´ng tÃ¬m tháº¥y káº¿t quáº£</div>',searchDropdown.style.display="block";return}const s=n.slice(0,5).map(e=>{const n=e.tags?e.tags.slice(0,2).map(e=>`<span class="dropdown-tag">${e}</span>`).join(""):"";return`
        <a href="${e.permalink}" class="dropdown-item">
          <div class="dropdown-title">${highlightText(e.title,t)}</div>
          <div class="dropdown-meta">
            <span class="dropdown-date">${formatDate(e.date)}</span>
            ${n}
          </div>
        </a>
      `}).join("");searchDropdown.innerHTML=s+(n.length>5?`<div class="dropdown-more">CÃ²n ${n.length-5} káº¿t quáº£...</div>`:""),searchDropdown.style.display="block"}),document.addEventListener("click",function(e){e.target.closest(".search-container")||(searchDropdown.style.display="none")}),headerSearchInput?.addEventListener("focus",function(){this.value.trim().length>=2&&(searchDropdown.style.display="block")});function highlightText(e,t){const n=new RegExp(`(${t})`,"gi");return e.replace(n,"<mark>$1</mark>")}function formatDate(e){const t=new Date(e);return t.toLocaleDateString("vi-VN")}</script><main><article class=blog-post><div class=post-header><div class=post-breadcrumb><a href=../../posts>â† Táº¥t cáº£ bÃ i viáº¿t</a></div><h1 class=post-title>Java: Láº­p TrÃ¬nh Äa Luá»“ng CÆ¡ Báº£n</h1><p class=post-description>TÃ¬m hiá»ƒu vá» multithreading vÃ  concurrency trong Java</p><div class=post-meta><div class=meta-left><span class=post-date><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
27/12/2025
</span><span class=reading-time><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
9 phÃºt Ä‘á»c</span></div><div class=post-tags><span class=post-tag>Java</span>
<span class=post-tag>Concurrency</span></div></div></div><div class=post-featured-image><img src="https://images.unsplash.com/photo-1518773553398-650c184e0bb3?w=1200&amp;h=600&amp;fit=crop" alt="Java: Láº­p TrÃ¬nh Äa Luá»“ng CÆ¡ Báº£n"></div><div class=post-featured-video><div class=video-wrapper><iframe src=https://www.youtube.com/embed/_SWK7pZQzIg title="YouTube video player" frameborder=0 allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy=strict-origin-when-cross-origin allowfullscreen></iframe></div></div><div class=post-content><p>Láº­p trÃ¬nh Ä‘a luá»“ng luÃ´n lÃ  má»™t chá»§ Ä‘á» Ä‘Æ°á»£c nhiá»u láº­p trÃ¬nh viÃªn chÃº Ã½ trong quÃ¡ trÃ¬nh phÃ¡t triá»ƒn pháº§n má»m, pháº£i lÃ m sao Ä‘á»ƒ chÆ°Æ¡ng trÃ¬nh cá»§a mÃ¬nh cháº¡y trÆ¡n tru nháº¥t, nháº¹ nhÃ ng nháº¥t Ä‘á»ƒ ngÆ°á»i dÃ¹ng cÃ³ thiá»‡n cáº£m tá»‘t vá»›i sáº£n pháº©m cá»§a mÃ¬nh. Trong bÃ i viáº¿t dÆ°á»›i Ä‘Ã¢y, chÃºng ta sáº½ cÃ¹ng tÃ¬m hiá»ƒu vá» láº­p trÃ¬nh Ä‘a luá»“ng vÃ  cÃ¡c thá»±c hiá»‡n vá»›i ngÃ´n ngá»¯ Java.</p><ol><li>Äa luá»“ng lÃ  gÃ¬ ?
Thread(luá»“ng) lÃ  má»™t tiáº¿n trÃ¬nh con(sub-process), má»™t Ä‘Æ¡n vá»‹ nhá» nháº¥t cá»§a mÃ¡y tÃ­nh cÃ³ thá»ƒ thá»±c hiá»‡n má»™t cÃ´ng viá»‡c riÃªng biá»‡t. Äa tiáº¿n trÃ¬nh vÃ  Ä‘a luá»“ng lÃ  cÃ¡c cÃ¡ch Ä‘á»ƒ Ä‘áº¡t Ä‘Æ°á»£c Ä‘a nhiá»‡m. Trong Java, cÃ¡c luá»“ng Ä‘Æ°á»£c quáº£n lÃ½ bá»Ÿi mÃ¡y áº£o Java(JVM)</li></ol><p>Lá»£i Ã­ch cá»§a Ä‘a luá»“ng
Äa luá»“ng khÃ´ng cháº·n ngÆ°á»i dÃ¹ng vÃ¬ cÃ¡c luá»“ng lÃ  Ä‘á»™c láº­p vÃ  báº¡n cÃ³ thá»ƒ thá»±c hiá»‡n nhiá»u hÃ nh Ä‘á»™ng táº¡i má»™t thá»i Ä‘iá»ƒm</p><p>CÃ³ thá»ƒ tiáº¿t kiá»‡m thá»i gian vÃ¬ cÃ³ thá»ƒ thá»±c hiá»‡n nhiá»u hÃ nh Ä‘á»™ng Ä‘á»“ng thá»i</p><p>CÃ¡c luá»“ng Ä‘á»™c láº­p nÃªn nÃ³ sáº½ khÃ´ng gÃ¢y áº£nh hÆ°á»Ÿng tá»›i cÃ¡c luá»“ng khÃ¡c náº¿u exception xáº£y ra táº¡i má»™t luá»“ng</p><p>CÃ¡c luá»“ng cÃ³ thá»ƒ dÃ¹ng chung vÃ  chia sáº» nguá»“n tÃ i nguyÃªn trong quÃ¡ trÃ¬nh cháº¡y, tuy nhiÃªn cÃ¡c luá»“ng váº«n sáº½ hoáº¡t Ä‘á»™ng Ä‘á»™c láº­p vá»›i nhau</p><p>NhÆ°á»£c Ä‘iá»ƒm cá»§a Ä‘a luá»“ng
Xá»­ lÃ½ chÆ°Æ¡ng trÃ¬nh phá»©c táº¡p</p><p>Xá»­ lÃ½ váº¥n Ä‘á» tranh cháº¥p bá»™ nhá»›, Ä‘á»“ng bá»™ dá»¯ liá»‡u khÃ¡ phá»©c táº¡p</p><p>Cáº§n phÃ¡t hiá»‡n cÃ¡c luá»“ng bá»‹ cháº·n, block(dead lock) Ä‘á»ƒ trÃ¡nh gÃ¢y lá»—i cho há»‡ thá»‘ng</p><ol start=2><li>Äa nhiá»‡m lÃ  gÃ¬ ?
Äa nhiá»‡m lÃ  kháº£ nÄƒng cháº¡y Ä‘á»“ng thá»i má»™t hay nhiá»u chÆ°Æ¡ng trÃ¬nh cÃ¹ng lÃºc trÃªn má»™t há»‡ Ä‘iá»u hÃ nh. ChÃºng ta dÃ¹ng Ä‘a nhiá»‡m Ä‘á»ƒ tá»‘i Æ°u viá»‡c sá»­ dá»¥ng tÃ i nguyÃªn CPU. Äa nhiá»‡m cÃ³ thá»ƒ Ä‘áº¡t Ä‘Æ°á»£c qua hai cÃ¡ch:</li></ol><p>Äa nhiá»‡m dá»±a trÃªn Ä‘a tiáº¿n trÃ¬nh(Multiprocessing)
Má»—i tiáº¿n trÃ¬nh cÃ³ má»™t Ä‘á»‹a chá»‰ trong bá»™ nhá»›, má»—i tiáº¿n trÃ¬nh cÃ³ má»™t bá»™ nhá»› riÃªng biá»‡t</p><p>Má»™t tiáº¿n trÃ¬nh lÃ  náº·ng</p><p>Sá»± giao tiáº¿p giá»¯a cÃ¡c tiáº¿n trÃ¬nh cÃ³ chi phÃ­ cao</p><p>Sá»± chuyá»ƒn Ä‘á»•i giá»¯a má»™t tiáº¿n trÃ¬nh sang tiáº¿n trÃ¬nh khÃ¡c Ä‘Ã²i há»i thá»i gian cho viá»‡c lÆ°u vÃ  táº£i cÃ¡c vÃ¹ng Ä‘Äƒng kÃ½ bá»™ nhá»›, danh sÃ¡ch, &mldr;</p><p>Äa nhiá»‡m dá»±a trÃªn Ä‘a luá»“ng(Multithreading)
Luá»“ng sá»­ dá»¥ng chung vÃ¹ng nhá»›</p><p>Luá»“ng lÃ  nháº¹</p><p>Chi phÃ­ giao tiáº¿p giá»¯a cÃ¡c luá»“ng lÃ  khÃ´ng cao</p><ol start=3><li>VÃ²ng Ä‘á»i cá»§a má»™t Thread trong Java
Má»™t Thread sáº½ tráº£i qua nÄƒm tráº¡ng thÃ¡i trong vÃ²ng Ä‘á»i cá»§a nÃ³. VÃ²ng Ä‘á»i cá»§a luá»“ng Ä‘Æ°á»£c quáº£n lÃ½ bá»Ÿi JVM bao gá»“m cÃ³:</li></ol><p>NEW : ÄÃ¢y lÃ  tráº¡ng thÃ¡i khi luá»“ng vá»«a Ä‘Æ°á»£c khá»Ÿi táº¡o báº±ng phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o cá»§a lá»›p Thread nhÆ°ng chÆ°a Ä‘Æ°á»£c start(). á» tráº¡ng thÃ¡i nÃ y, luá»“ng Ä‘Æ°á»£c táº¡o ra nhÆ°ng chÆ°a Ä‘Æ°á»£c cáº¥p phÃ¡t tÃ i nguyÃªn vÃ  cÅ©ng chÆ°a cháº¡y. Náº¿u luá»“ng Ä‘ang á»Ÿ tráº¡ng thÃ¡i nÃ y mÃ  ta gá»i cÃ¡c phÆ°Æ¡ng thá»©c Ã©p buá»™c stop,resume,suspend â€¦ sáº½ lÃ  nguyÃªn nhÃ¢n sáº£y ra ngoáº¡i lá»‡ IllegalThreadStateException .</p><p>RUNNABLE : Sau khi gá»i phÆ°Æ¡ng thá»©c start() thÃ¬ luá»“ng test Ä‘Ã£ Ä‘Æ°á»£c cáº¥p phÃ¡t tÃ i nguyÃªn vÃ  cÃ¡c lá»‹ch Ä‘iá»u phá»‘i CPU cho luá»“ng test cÅ©ng báº¯t Ä‘áº§u cÃ³ hiá»‡u lá»±c. á» Ä‘Ã¢y, chÃºng ta dÃ¹ng tráº¡ng thÃ¡i lÃ  Runnable chá»© khÃ´ng pháº£i Running, vÃ¬ luá»“ng khÃ´ng thá»±c sá»± luÃ´n cháº¡y mÃ  tÃ¹y vÃ o há»‡ thá»‘ng mÃ  cÃ³ sá»± Ä‘iá»u phá»‘i CPU khÃ¡c nhau.</p><p>WAITING : Thread chá» khÃ´ng giá»›i háº¡n cho Ä‘áº¿n khi má»™t luá»“ng khÃ¡c Ä‘Ã¡nh thá»©c nÃ³.</p><p>TIMED_WAITING : Thread chá» trong má»™t thá»i gian nháº¥t Ä‘á»‹nh, hoáº·c lÃ  cÃ³ má»™t luá»“ng khÃ¡c Ä‘Ã¡nh thá»©c nÃ³.</p><p>BLOCKED: ÄÃ¢y lÃ  1 dáº¡ng cá»§a tráº¡ng thÃ¡i â€œNot Runnableâ€, lÃ  tráº¡ng thÃ¡i khi Thread váº«n cÃ²n sá»‘ng, nhÆ°ng hiá»‡n táº¡i khÃ´ng Ä‘Æ°á»£c chá»n Ä‘á»ƒ cháº¡y. Thread chá» má»™t monitor Ä‘á»ƒ unlock má»™t Ä‘á»‘i tÆ°á»£ng mÃ  nÃ³ cáº§n.</p><p>TERMINATED : Má»™t thread á»Ÿ trong tráº¡ng thÃ¡i terminated hoáº·c dead khi phÆ°Æ¡ng thá»©c run() cá»§a nÃ³ bá»‹ thoÃ¡t.</p><ol start=4><li>Lá»›p Thread trong Java
Trong Java, chÃºng ta cÃ³ thá»ƒ táº¡o ra má»™t luá»“ng báº±ng cÃ¡ch táº¡o má»™t Ä‘á»‘i tÆ°á»£ng tá»« má»™t lá»›p káº¿ thá»«a lá»›p Thread. Äá»ƒ khá»Ÿi táº¡o má»™t luá»“ng báº±ng cÃ¡ch nÃ y, chÃºng ta sáº½ pháº£i thá»±c hiá»‡n cÃ¡c bÆ°á»›c sau:</li></ol><p>Khai bÃ¡o má»™t lá»›p káº¿ thá»«a lá»›p Thread</p><p>Override láº¡i phÆ°Æ¡ng thá»©c run() cá»§a lá»›p nÃ y, cÃ¡c dÃ²ng lá»‡nh trong phÆ°Æ¡ng thá»©c nÃ y sáº½ Ä‘Æ°á»£c thá»±c thi khi luá»“ng báº¯t Ä‘áº§u cháº¡y. Sau khi luá»“ng Ä‘Ã£ thá»±c hiá»‡n xong cÃ¡c dÃ²ng code trong phÆ°Æ¡ng thá»©c run thÃ¬ luá»“ng sáº½ chuyá»ƒn sang tráº¡ng thÃ¡i há»§y.</p><p>Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng cá»§a lá»›p vá»«a khai bÃ¡o.</p><p>Gá»i phÆ°Æ¡ng thá»©c start() Ä‘á»ƒ báº¯t Ä‘áº§u thá»±c thi luá»“ng.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ThreadSample</span> <span style=color:#66d9ef>extends</span> Thread{
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;This is a thread, myThreadName: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>getName</span>());
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Táº¡i sao gá»i phÆ°Æ¡ng thá»©c start() chá»© khÃ´ng pháº£i run() Ä‘á»ƒ thá»±c thi luá»“ng?</p><p>PhÆ°Æ¡ng thá»©c start() lÃ  phÆ°Æ¡ng thá»©c Ä‘áº·c biá»‡t Ä‘Æ°á»£c Oracle xÃ¢y dá»±ng trong lá»›p Thread, phÆ°Æ¡ng thá»©c nÃ y sáº½ cáº¥p phÃ¡t tÃ i nguyÃªn cho luá»“ng rá»“i má»›i thá»±c thi phÆ°Æ¡ng thá»©c run() á»Ÿ luá»“ng nÃ y.</p><p>Do Ä‘Ã³, náº¿u ta gá»i phÆ°Æ¡ng thá»©c run() thÃ¬ cÅ©ng tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i viá»‡c gá»i má»™t phÆ°Æ¡ng thá»©c á»Ÿ má»™t lá»›p bÃ¬nh thÆ°á»ng vÃ  nÃ³ sáº½ cháº¡y trÃªn luá»“ng thá»±c hiá»‡n gá»i phÆ°Æ¡ng thá»©c chá»© khÃ´ng sinh ra má»™t luá»“ng má»›i.</p><p>ThÃªm má»™t lÆ°u Ã½ ná»¯a, báº¡n khÃ´ng thá»ƒ gá»i phÆ°Æ¡ng thá»©c start() cá»§a Thread hai láº§n, náº¿u khÃ´ng sáº½ cÃ³ ngoáº¡i lá»‡ IllegalThreadStateException xáº£y ra.</p><ol start=5><li>Interface Runnable trong Java
NgoÃ i cÃ¡ch sá»­ káº¿ thá»«a lá»›p Thread trong Java, báº¡n hoÃ n toÃ n cÃ³ thá»ƒ sá»­ dá»¥ng interface Runnable trong Java Ä‘á»ƒ khá»Ÿi táº¡o má»™t luá»“ng má»›i. Äá»ƒ táº¡o luá»“ng báº±ng cÃ¡ch sá»­ dá»¥ng Runnable, ta pháº£i lÃ m cÃ¡c cÃ´ng viá»‡c sau:</li></ol><p>Khai bÃ¡o má»™t lá»›p implement Runnable</p><p>Override láº¡i phÆ°Æ¡ng thá»©c run() trong lá»›p nÃ y. Viá»‡c nÃ y tÆ°Æ¡ng tá»± vá»›i viá»‡c override láº¡i phÆ°Æ¡ng thá»©c run() trong cÃ¡ch sá»­ dá»¥ng lá»›p Thread</p><p>Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng cá»§a lá»›p vá»«a khai bÃ¡o</p><p>Táº¡o má»™t Ä‘á»‘i tÆ°á»£ng Thread báº±ng constructor: Thread(Runnable runnable). Äiá»u thÃº vá»‹ á»Ÿ Ä‘Ã¢y lÃ , máº·c dÃ¹ chÃºng ta váº«n cáº§n má»™t Ä‘á»‘i tÆ°á»£ng Thread Ä‘á»ƒ khá»Ÿi táº¡o luá»“ng má»›i, tuy nhiÃªn thay vÃ¬ viá»‡c override láº¡i phÆ°Æ¡ng thá»©c run() cá»§a nÃ³ thÃ¬ chÃºng ta láº¡i truyá»n vÃ o Ä‘Ã¢y má»™t Runnable vá»›i cÃ¡c dÃ²ng code thá»±c thi chÆ°Æ¡ng trÃ¬nh Ä‘Ã£ Ä‘Æ°á»£c thÃªm vÃ o trong phÆ°Æ¡ng thá»©c run()</p><p>Gá»i phÆ°Æ¡ng thá»©c start() Ä‘á»ƒ báº¯t Ä‘áº§u thá»±c thi luá»“ng</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>PingWorker</span> <span style=color:#66d9ef>implements</span> Runnable {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> Logger LOGGER <span style=color:#f92672>=</span> LogManager.<span style=color:#a6e22e>getLogger</span>(<span style=color:#e6db74>&#34;PingWorker&#34;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>long</span> TIMEOUT_PING <span style=color:#f92672>=</span> 30 <span style=color:#f92672>*</span> 1000L;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span>() {
</span></span><span style=display:flex><span>        LOGGER.<span style=color:#a6e22e>info</span>(<span style=color:#e6db74>&#34;Start ping worker !&#34;</span>);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>while</span> (<span style=color:#66d9ef>true</span>) {
</span></span><span style=display:flex><span>            Packet pingPacket <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Packet();
</span></span><span style=display:flex><span>            pingPacket.<span style=color:#a6e22e>setServiceType</span>(Constants.<span style=color:#a6e22e>PacketServiceType</span>.<span style=color:#a6e22e>PING</span>);
</span></span><span style=display:flex><span>            pingPacket.<span style=color:#a6e22e>setBody</span>(<span style=color:#66d9ef>new</span> JSONObject());
</span></span><span style=display:flex><span>            List<span style=color:#f92672>&lt;</span>Connection<span style=color:#f92672>&gt;</span> allConnections <span style=color:#f92672>=</span> ConnectionManager.<span style=color:#a6e22e>getInstance</span>().<span style=color:#a6e22e>getAllConnections</span>();
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> (Connection connection : allConnections) {
</span></span><span style=display:flex><span>                connection.<span style=color:#a6e22e>sendPacket</span>(pingPacket);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>                TimeUnit.<span style=color:#a6e22e>SECONDS</span>.<span style=color:#a6e22e>sleep</span>(30);
</span></span><span style=display:flex><span>            } <span style=color:#66d9ef>catch</span> (Exception ex) {
</span></span><span style=display:flex><span>                LOGGER.<span style=color:#a6e22e>error</span>(<span style=color:#e6db74>&#34;Error  when trying to sleep &#34;</span>, ex);
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Khi nÃ o thÃ¬ nÃªn dÃ¹ng Runnable
VÃ¬ Runnable lÃ  má»™t interface nÃªn nÃ³ cÃ³ thá»ƒ giÃºp chÃºng ta giáº£i quyáº¿t bÃ i toÃ¡n Ä‘a káº¿ thá»«a. NgoÃ i ra, Thread Pool cÅ©ng cháº¥p nháº­n cÃ¡c Ä‘á»‘i tÆ°á»£ng Ä‘á»ƒ nÃ³ quáº£n lÃ½ lÃ  Runnable, viá»‡c sá»­ dá»¥ng Thread Pool mang láº¡i nhiá»u hiá»‡u quáº£ trong viá»‡c quáº£n lÃ½ cÃ¡c luá»“ng</p><p>Trong cÃ¡c trÆ°á»ng há»£p cÃ²n láº¡i, báº¡n hoÃ n toÃ n cÃ³ thá»ƒ sá»­ dá»¥ng Thread</p><ol start=6><li>VÃ­ dá»¥ minh há»a sá»­ dá»¥ng Ä‘a luá»“ng
Táº¡o luá»“ng vá»›i Thread</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ThreadSample</span> <span style=color:#66d9ef>extends</span> Thread{
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;This is a thread, myThreadName: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>getName</span>());
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) {
</span></span><span style=display:flex><span>        ThreadSample thread <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ThreadSample();
</span></span><span style=display:flex><span>        ThreadSample thread2 <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ThreadSample();
</span></span><span style=display:flex><span>        ThreadSample thread3 <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ThreadSample();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;CurrentThread &#34;</span> <span style=color:#f92672>+</span> Thread.<span style=color:#a6e22e>currentThread</span>().<span style=color:#a6e22e>getName</span>());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        thread.<span style=color:#a6e22e>start</span>();
</span></span><span style=display:flex><span>        thread2.<span style=color:#a6e22e>start</span>();
</span></span><span style=display:flex><span>        thread3.<span style=color:#a6e22e>start</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Output chÆ°Æ¡ng trÃ¬nh:</strong></p><pre tabindex=0><code>CurrentThread main
This is a thread, myThreadName: Thread-0
This is a thread, myThreadName: Thread-2
This is a thread, myThreadName: Thread-1
</code></pre><p>Táº¡o luá»“ng vá»›i interface Runnable</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>RunnableSample</span> <span style=color:#66d9ef>implements</span> Runnable {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>long</span> timestamp <span style=color:#f92672>=</span> System.<span style=color:#a6e22e>currentTimeMillis</span>();
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>printf</span>(<span style=color:#e6db74>&#34;[%s]Checking timestamp%n&#34;</span>, Thread.<span style=color:#a6e22e>currentThread</span>().<span style=color:#a6e22e>getName</span>());
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>printf</span>(<span style=color:#e6db74>&#34;[%s]My timestamp: %d%n&#34;</span>, Thread.<span style=color:#a6e22e>currentThread</span>().<span style=color:#a6e22e>getName</span>(), timestamp);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) {
</span></span><span style=display:flex><span>        Thread thread1 <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Thread(<span style=color:#66d9ef>new</span> RunnableSample());
</span></span><span style=display:flex><span>        Thread thread2 <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Thread(<span style=color:#66d9ef>new</span> RunnableSample());
</span></span><span style=display:flex><span>        Thread thread3 <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Thread(<span style=color:#66d9ef>new</span> RunnableSample());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        thread1.<span style=color:#a6e22e>start</span>();
</span></span><span style=display:flex><span>        thread2.<span style=color:#a6e22e>start</span>();
</span></span><span style=display:flex><span>        thread3.<span style=color:#a6e22e>start</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>Output chÆ°Æ¡ng trÃ¬nh:</strong></p><pre tabindex=0><code>[Thread-2]Checking timestamp
[Thread-0]Checking timestamp
[Thread-0]My timestamp: 1687795285576
[Thread-1]Checking timestamp
[Thread-1]My timestamp: 1687795285576
[Thread-2]My timestamp: 1687795285576
</code></pre><ol start=7><li>CÃ¡c phÆ°Æ¡ng thá»©c cá»§a lá»›p Thread thÆ°á»ng Ä‘Æ°á»£c hay sá»­ dá»¥ng</li></ol><table><thead><tr><th>Kiá»ƒu tráº£ vá»</th><th>TÃªn phÆ°Æ¡ng thá»©c</th><th>MÃ´ táº£</th></tr></thead><tbody><tr><td>void</td><td>start()</td><td>ÄÆ°á»£c sá»­ dá»¥ng Ä‘á»ƒ báº¯t Ä‘áº§u thá»±c thi má»™t luá»“ng</td></tr><tr><td>void</td><td>run()</td><td>ÄÆ°á»£c sá»­ dá»¥ng Ä‘á»ƒ cháº¡y hÃ nh Ä‘á»™ng cá»§a má»™t luá»“ng</td></tr><tr><td>static void</td><td>sleep()</td><td>Nghá»‰ má»™t luá»“ng trong má»™t khoáº£ng thá»i gian</td></tr><tr><td>static Thread</td><td>currentThread()</td><td>Tráº£ vá» tham chiáº¿u tá»›i luá»“ng Ä‘ang thá»±c thi Ä‘á»‘i tÆ°á»£ng Thread</td></tr><tr><td>void</td><td>join()</td><td>Chá» má»™t thread hoÃ n thÃ nh vÃ²ng Ä‘á»i cá»§a nÃ³</td></tr><tr><td>int</td><td>getPriority()</td><td>Tráº£ vá» giÃ¡ trá»‹ Æ°u tiÃªn cá»§a luá»“ng</td></tr><tr><td>void</td><td>setPriority(int)</td><td>Thay Ä‘á»•i giÃ¡ trá»‹ Æ°u tiÃªn cá»§a luá»“ng</td></tr><tr><td>String</td><td>getName()</td><td>Tráº£ vá» tÃªn cá»§a luá»“ng</td></tr><tr><td>void</td><td>setName(String)</td><td>Thay Ä‘á»•i tÃªn cá»§a luá»“ng</td></tr><tr><td>long</td><td>getId()</td><td>Tráº£ vá» id cá»§a luá»“ng</td></tr><tr><td>boolean</td><td>isAlive()</td><td>Cho biáº¿t thread cÃ²n sá»‘ng hay khÃ´ng</td></tr><tr><td>static void</td><td>yield()</td><td>LÃ m cho luá»“ng hiá»‡n táº¡i táº¡m dá»«ng vÃ  cho phÃ©p cÃ¡c thread khÃ¡c thá»±c hiá»‡n trong má»™t khoáº£ng thá»i gian</td></tr><tr><td>void</td><td>suspend()</td><td>ÄÆ°á»£c sá»­ dá»¥ng Ä‘á»ƒ táº¡m dá»«ng má»™t luá»“ng</td></tr><tr><td>void</td><td>resume()</td><td>ÄÆ°á»£c sá»­ dá»¥ng Ä‘á»ƒ tiáº¿p tá»¥c luá»“ng Ä‘Ã£ bá»‹ táº¡m dá»«ng</td></tr><tr><td>void</td><td>stop()</td><td>ÄÆ°á»£c dÃ¹ng Ä‘á»ƒ dá»«ng thread</td></tr><tr><td>void</td><td>destroy()</td><td>DÃ¹ng Ä‘á»ƒ phÃ¡ há»§y cÃ¡c nhÃ³m luá»“ng vÃ  cÃ¡c nhÃ³m con cá»§a nÃ³</td></tr><tr><td>boolean</td><td>isDaemon()</td><td>Kiá»ƒm tra xem luá»“ng nÃ y cÃ³ pháº£i lÃ  daemon thread hay khÃ´ng</td></tr><tr><td>void</td><td>setDaemon(boolean)</td><td>Thay Ä‘á»•i viá»‡c luá»“ng cÃ³ pháº£i lÃ  daemon hay khÃ´ng</td></tr><tr><td>void</td><td>interrupt()</td><td>LÃ m giÃ¡n Ä‘oáº¡n má»™t luá»“ng trong java. Náº¿u thread náº±m trong tráº¡ng thÃ¡i sleep hoáº·c wait, nghÄ©a lÃ  sleep() hoáº·c wait() Ä‘Æ°á»£c gá»i ra. Viá»‡c gá»i phÆ°Æ¡ng thá»©c interrupt() trÃªn thread Ä‘Ã³ sáº½ phÃ¡ vá»¡ tráº¡ng thÃ¡i sleep hoáº·c wait vÃ  nÃ©m ra ngoáº¡i lá»‡ InterruptedException. Náº¿u thread khÃ´ng á»Ÿ trong tráº¡ng thÃ¡i sleep hoáº·c wait, viá»‡c gá»i phÆ°Æ¡ng thá»©c interrupt() thá»±c hiá»‡n hÃ nh vi bÃ¬nh thÆ°á»ng vÃ  khÃ´ng lÃ m giÃ¡n Ä‘oáº¡n thread nhÆ°ng Ä‘áº·t cá» interrupt thÃ nh true.</td></tr><tr><td>boolean</td><td>isInterrupted()</td><td>Kiá»ƒm tra xem luá»“ng cÃ³ bá»‹ interrupt hay khÃ´ng</td></tr><tr><td>static boolean</td><td>interrupted()</td><td>Kiá»ƒm tra xem luá»“ng hiá»‡n táº¡i cÃ³ bá»‹ interrupt hay chÆ°a</td></tr></tbody></table><p><strong>Káº¿t luáº­n</strong></p><p>Láº­p trÃ¬nh Ä‘a luá»“ng Java mang láº¡i nhiá»u lá»£i Ã­ch nhÆ° tÄƒng hiá»‡u suáº¥t vÃ  táº­n dá»¥ng tÃ i nguyÃªn há»‡ thá»‘ng. Tuy nhiÃªn, viá»‡c quáº£n lÃ½ vÃ  Ä‘á»“ng bá»™ hÃ³a luá»“ng Ä‘Ã²i há»i ká»¹ nÄƒng chÃ­nh xÃ¡c vÃ  pháº£i trÃ¡nh cÃ¡c váº¥n Ä‘á» nhÆ° data race vÃ  deadlock. Trong bÃ i viáº¿t nÃ y, Stringee Ä‘Ã£ giÃºp cÃ¡c báº¡n cÃ³ Ä‘Æ°á»£c cÃ¡c kiáº¿n thá»©c vá» láº­p trÃ¬nh Ä‘a luá»“ng vá»›i Java, trong cÃ¡c bÃ i viáº¿t tiáº¿p theo cá»§a series láº­p trÃ¬nh Ä‘a luá»“ng, chÃºng ta sáº½ tÃ¬m hiá»ƒu vá» cÃ¡ch phÃ²ng trÃ¡nh deadlock vÃ  data race cÅ©ng nhÆ° cÃ¡c ká»¹ thuáº­t láº­p trÃ¬nh Ä‘a luá»“ng khÃ¡c.</p></div><div class=comments-section><h3 class=comments-title>ğŸ’¬ BÃ¬nh luáº­n <span id=commentCount></span></h3><div class=comment-form><input type=text id=commentName placeholder="TÃªn cá»§a báº¡n" maxlength=50>
<textarea id=commentText placeholder="Viáº¿t bÃ¬nh luáº­n cá»§a báº¡n..." rows=3 maxlength=500></textarea>
<button onclick=addComment() class=submit-comment>Gá»­i bÃ¬nh luáº­n</button></div><div class=comment-filter><button onclick='filterComments("top")' class="filter-btn active" id=filter-top>ğŸ‘ Cháº¥t lÆ°á»£ng nháº¥t</button>
<button onclick='filterComments("newest")' class=filter-btn id=filter-newest>ğŸ• Má»›i nháº¥t</button></div><div id=commentsList class=comments-list></div><button id=showAllBtn class=show-all-btn onclick=showAllComments() style=display:none>
Xem táº¥t cáº£ bÃ¬nh luáº­n</button></div><script src=https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js></script><script src=https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js></script><script>const firebaseConfig={apiKey:"AIzaSyAdjhCEVyCd-Lr5M6wIrcVIdUGZK5nnMRQ",authDomain:"project-profile-e5576.firebaseapp.com",databaseURL:"https://project-profile-e5576-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"project-profile-e5576",storageBucket:"project-profile-e5576.firebasestorage.app",messagingSenderId:"141833177870",appId:"1:141833177870:web:510eb87ec5b5749d9e255f",measurementId:"G-8EZ42LZQ09"};firebase.initializeApp(firebaseConfig);const database=firebase.database(),POST_ID="/posts/java-multithreading/".replace(/\//g,"_");let currentFilter="top",showAll=!1,commentsCache=[];function getComments(){return commentsCache}function loadCommentsFromFirebase(){const e=database.ref("comments/"+POST_ID);e.on("value",e=>{const t=e.val();t?commentsCache=Object.values(t).map(e=>({...e,likedBy:e.likedBy||[],likes:e.likes||0})):commentsCache=[],renderComments()})}function addComment(){const e=document.getElementById("commentName").value.trim(),t=document.getElementById("commentText").value.trim();if(!e||!t){alert("Vui lÃ²ng nháº­p tÃªn vÃ  ná»™i dung bÃ¬nh luáº­n!");return}const n={id:Date.now(),name:e,text:t,likes:0,timestamp:(new Date).toISOString(),likedBy:[]},s=database.ref("comments/"+POST_ID);s.push(n).then(()=>{document.getElementById("commentName").value="",document.getElementById("commentText").value=""}).catch(e=>{alert("Lá»—i khi gá»­i bÃ¬nh luáº­n: "+e.message)})}function likeComment(e){const t=getUserId(),n=database.ref("comments/"+POST_ID);n.once("value").then(n=>{const o=n.val();if(!o)return;let i=null,s=null;if(Object.keys(o).forEach(t=>{o[t].id===e&&(i=t,s=o[t])}),s&&i){const e=s.likedBy||[],n=e.indexOf(t);n>-1?(e.splice(n,1),s.likes=Math.max(0,(s.likes||0)-1)):(e.push(t),s.likes=(s.likes||0)+1),s.likedBy=e,database.ref("comments/"+POST_ID+"/"+i).set(s)}})}function getUserId(){let e=localStorage.getItem("userId");return e||(e="user_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),localStorage.setItem("userId",e)),e}function formatDate(e){const n=new Date(e),s=new Date,t=Math.floor((s-n)/1e3);return t<60?"vá»«a xong":t<3600?Math.floor(t/60)+" phÃºt trÆ°á»›c":t<86400?Math.floor(t/3600)+" giá» trÆ°á»›c":t<2592e3?Math.floor(t/86400)+" ngÃ y trÆ°á»›c":n.toLocaleDateString("vi-VN")}function filterComments(e){currentFilter=e,document.querySelectorAll(".filter-btn").forEach(e=>{e.classList.remove("active")}),document.getElementById("filter-"+e).classList.add("active"),renderComments()}function showAllComments(){showAll=!0,renderComments()}function renderComments(){let e=getComments();const n=document.getElementById("commentCount");e.length>0?n.textContent=`(${e.length})`:n.textContent="",currentFilter==="top"?e.sort((e,t)=>t.likes-e.likes):e.sort((e,t)=>new Date(t.timestamp)-new Date(e.timestamp));const s=getUserId(),o=showAll?e:e.slice(0,3),i=o.map(e=>{const t=e.likedBy||[],n=e.likes||0,o=t.includes(s);return`
          <div class="comment-item">
            <div class="comment-avatar">${e.name.charAt(0).toUpperCase()}</div>
            <div class="comment-content">
              <div class="comment-header">
                <strong>${e.name}</strong>
                <span class="comment-time">${formatDate(e.timestamp)}</span>
              </div>
              <p class="comment-text">${e.text}</p>
              <button onclick="likeComment(${e.id})" class="like-btn ${o?"liked":""}">
                â¤ï¸ ${n}
              </button>
            </div>
          </div>
        `}).join("");document.getElementById("commentsList").innerHTML=i||'<p class="no-comments">ChÆ°a cÃ³ bÃ¬nh luáº­n nÃ o. HÃ£y lÃ  ngÆ°á»i Ä‘áº§u tiÃªn!</p>';const t=document.getElementById("showAllBtn");e.length>3&&!showAll?(t.style.display="block",t.textContent=`Xem táº¥t cáº£ ${e.length} bÃ¬nh luáº­n`):t.style.display="none"}loadCommentsFromFirebase()</script><div class=post-footer><a href=../../posts class=back-to-blog><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
Xem táº¥t cáº£ bÃ i viáº¿t</a></div></article></main><footer class=footer><div class=container><p>&copy; 2025 DÆ°Æ¡ng Gia Báº£o. All rights reserved.</p></div></footer></body></html>