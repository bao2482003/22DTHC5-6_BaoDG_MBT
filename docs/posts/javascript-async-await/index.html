<!doctype html><html lang=vi><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>JavaScript Async/Await: Promise nh∆∞ng d·ªÖ ƒë·ªçc h∆°n | Profile</title><link rel=stylesheet href=../../css/style.css><link rel=icon href=../../favicon.ico type=image/x-icon></head><body><header class=header><div class=container><div class=logo><a href=../../><span class=logo-icon>üè†</span>
<span class=logo-text>Profile</span></a></div><nav class=nav><div class=search-box><span>T√¨m ki·∫øm...</span></div><ul class=menu><li><a href=../../#about>V·ªÅ t√¥i</a></li><li><a href=../../#experience>Kinh nghi·ªám</a></li><li><a href=../../#education>H·ªçc v·∫•n</a></li><li><a href=../../#certificates>Ch·ª©ng ch·ªâ</a></li><li><a href=../../#contact>Li√™n h·ªá</a></li><li><a href=../../posts>Blog</a></li><li><a href=../../#gallery>Th∆∞ vi·ªán ·∫£nh</a></li></ul><button class=theme-toggle aria-label="Toggle dark mode">üåô</button></nav></div></header><main><h1>JavaScript Async/Await: Promise nh∆∞ng d·ªÖ ƒë·ªçc h∆°n</h1><time datetime=2024-12-05T00:00:00+00:00>December 5, 2024</time><h2 id=v·∫•n-ƒë·ªÅ-v·ªõi-callback-hell>V·∫•n ƒë·ªÅ v·ªõi Callback Hell</h2><p>Tr∆∞·ªõc ƒë√¢y, x·ª≠ l√Ω b·∫•t ƒë·ªìng b·ªô trong JavaScript r·∫•t kh√≥ ƒë·ªçc:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>getData</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>a</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>getMoreData</span>(<span style=color:#a6e22e>a</span>, <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>b</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>getMoreData</span>(<span style=color:#a6e22e>b</span>, <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>c</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>getMoreData</span>(<span style=color:#a6e22e>c</span>, <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>d</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>d</span>);
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><h2 id=promise-gi·∫£i-quy·∫øt-ph·∫ßn-n√†o>Promise gi·∫£i quy·∫øt ph·∫ßn n√†o</h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>getData</span>()
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>a</span> =&gt; <span style=color:#a6e22e>getMoreData</span>(<span style=color:#a6e22e>a</span>))
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>b</span> =&gt; <span style=color:#a6e22e>getMoreData</span>(<span style=color:#a6e22e>b</span>))
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>c</span> =&gt; <span style=color:#a6e22e>getMoreData</span>(<span style=color:#a6e22e>c</span>))
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#a6e22e>d</span> =&gt; <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>d</span>))
</span></span><span style=display:flex><span>  .<span style=color:#66d9ef>catch</span>(<span style=color:#a6e22e>error</span> =&gt; <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#a6e22e>error</span>));
</span></span></code></pre></div><h2 id=asyncawait---gi·∫£i-ph√°p-t·ªëi-∆∞u>Async/Await - Gi·∫£i ph√°p t·ªëi ∆∞u</h2><p>Async/await gi√∫p code b·∫•t ƒë·ªìng b·ªô tr√¥ng nh∆∞ ƒë·ªìng b·ªô:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>fetchData</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>getData</span>();
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>b</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>getMoreData</span>(<span style=color:#a6e22e>a</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>c</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>getMoreData</span>(<span style=color:#a6e22e>b</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>d</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>getMoreData</span>(<span style=color:#a6e22e>c</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>d</span>);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#a6e22e>error</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=c√∫-ph√°p-c∆°-b·∫£n>C√∫ ph√°p c∆° b·∫£n</h2><h3 id=khai-b√°o-async-function>Khai b√°o async function</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// Function declaration
</span></span></span><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>myFunction</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;Hello&#34;</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Arrow function
</span></span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>myFunction</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>async</span> () =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;Hello&#34;</span>;
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Method
</span></span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyClass</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>async</span> <span style=color:#a6e22e>myMethod</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;Hello&#34;</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=s·ª≠-d·ª•ng-await>S·ª≠ d·ª•ng await</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getUser</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>response</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#e6db74>&#39;/api/user&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>json</span>();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>data</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=x·ª≠-l√Ω-nhi·ªÅu-promise-song-song>X·ª≠ l√Ω nhi·ªÅu Promise song song</h2><h3 id=-ch·∫≠m---ch·ªù-tu·∫ßn-t·ª±>‚ùå Ch·∫≠m - Ch·ªù tu·∫ßn t·ª±</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getData</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>user</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>fetchUser</span>();      <span style=color:#75715e>// 2s
</span></span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>posts</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>fetchPosts</span>();    <span style=color:#75715e>// 2s
</span></span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>comments</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>fetchComments</span>(); <span style=color:#75715e>// 2s
</span></span></span><span style=display:flex><span>  <span style=color:#75715e>// T·ªïng: 6s
</span></span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=-nhanh---ch·∫°y-song-song>‚úÖ Nhanh - Ch·∫°y song song</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>getData</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>user</span>, <span style=color:#a6e22e>posts</span>, <span style=color:#a6e22e>comments</span>] <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> Promise.<span style=color:#a6e22e>all</span>([
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fetchUser</span>(),
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fetchPosts</span>(),
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fetchComments</span>()
</span></span><span style=display:flex><span>  ]);
</span></span><span style=display:flex><span>  <span style=color:#75715e>// T·ªïng: 2s (th·ªùi gian c·ªßa request ch·∫≠m nh·∫•t)
</span></span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=error-handling>Error Handling</h2><h3 id=trycatch>Try/Catch</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>fetchData</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>data</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#e6db74>&#39;/api/data&#39;</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>data</span>.<span style=color:#a6e22e>json</span>();
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#e6db74>&#39;L·ªói:&#39;</span>, <span style=color:#a6e22e>error</span>);
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=higher-order-function>Higher-order function</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>asyncHandler</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>fn</span>) =&gt; <span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>res</span>, <span style=color:#a6e22e>next</span>) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>try</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>fn</span>(<span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>res</span>, <span style=color:#a6e22e>next</span>);
</span></span><span style=display:flex><span>  } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>next</span>(<span style=color:#a6e22e>error</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// S·ª≠ d·ª•ng
</span></span></span><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/users&#39;</span>, <span style=color:#a6e22e>asyncHandler</span>(<span style=color:#66d9ef>async</span> (<span style=color:#a6e22e>req</span>, <span style=color:#a6e22e>res</span>) =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>users</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>User</span>.<span style=color:#a6e22e>find</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>json</span>(<span style=color:#a6e22e>users</span>);
</span></span><span style=display:flex><span>}));
</span></span></code></pre></div><h2 id=best-practices>Best Practices</h2><ol><li><strong>Lu√¥n d√πng try/catch</strong> ho·∫∑c <code>.catch()</code> ƒë·ªÉ x·ª≠ l√Ω l·ªói</li><li><strong>Ch·∫°y song song khi c√≥ th·ªÉ</strong> v·ªõi <code>Promise.all()</code></li><li><strong>Kh√¥ng qu√™n await</strong> - s·∫Ω tr·ªü th√†nh Promise ch∆∞a resolve</li><li><strong>C·∫©n th·∫≠n v·ªõi forEach</strong> - d√πng <code>for...of</code> thay v√¨ <code>forEach</code></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// ‚ùå Kh√¥ng ho·∫°t ƒë·ªông nh∆∞ mong ƒë·ª£i
</span></span></span><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>processArray</span>(<span style=color:#a6e22e>array</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>array</span>.<span style=color:#a6e22e>forEach</span>(<span style=color:#66d9ef>async</span> <span style=color:#a6e22e>item</span> =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>processItem</span>(<span style=color:#a6e22e>item</span>);
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// ‚úÖ ƒê√∫ng c√°ch
</span></span></span><span style=display:flex><span><span style=color:#66d9ef>async</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>processArray</span>(<span style=color:#a6e22e>array</span>) {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>item</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>array</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>processItem</span>(<span style=color:#a6e22e>item</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=k·∫øt-lu·∫≠n>K·∫øt lu·∫≠n</h2><p>Async/await l√†m cho code b·∫•t ƒë·ªìng b·ªô d·ªÖ ƒë·ªçc, d·ªÖ debug v√† d·ªÖ maintain h∆°n r·∫•t nhi·ªÅu so v·ªõi callback v√† promise chains!</p><div><div>Tags:</div><ul><li><a href=../../tags/javascript/>JavaScript</a></li><li><a href=../../tags/async/>Async</a></li></ul></div></main><footer class=footer><div class=container><p>&copy; 2025 D∆∞∆°ng Gia B·∫£o. All rights reserved.</p></div></footer></body></html>